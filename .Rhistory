load("acs2017_ny_data.RData")
attach(acs2017_ny)
load("acs2017_ny_data.RData")
attach(acs2017_ny)
detach()
hist(AGE[(AGE > 90)])
mean(AGE[ (female == 1) & (AGE<90) ])
str(as.numeric(PUMA))
PUMA <- as.factor(PUMA)
female <- as.factor(female)
print(levels(female))
levels(female) <- c("male","female")
educ_indx <- factor((educ_nohs + 2*educ_hs + 3*educ_somecoll + 4*educ_college + 5*educ_advdeg), levels=c(1,2,3,4,5),labels = c("No HS","HS","SmColl","Bach","Adv"))
So enter this into the Console,
```
install.packages("tidyverse")
install.packages("plyr")
```
then
```{r message=FALSE}
library(tidyverse)
library(plyr)
levels_n <- read.csv("PUMA_levels.csv")
levels_orig <- levels(PUMA)
levels_new <- join(data.frame(levels_orig),data.frame(levels_n))
levels(PUMA) <- levels_new$New_Level
```
levels_n <- read.csv("PUMA_levels.csv")
levels_orig <- levels(PUMA)
levels_new <- join(data.frame(levels_orig),data.frame(levels_n))
levels(PUMA) <- levels_new$New_Level
summary(female)
summary(PUMA)
summary(educ_indx)
ddply(acs2017_ny, .(PUMA), summarize, mean = round(mean(AGE), 2), sd = round(sd(AGE), 2))
dat_use1 <- subset(acs2017_ny,((INCWAGE > 0) & in_NYC))
ddply(dat_use1, .(PUMA), summarize, inc90 = quantile(INCWAGE,probs = 0.9), inc10 = quantile(INCWAGE,probs = 0.1), n_obs = length(INCWAGE))
table(educ_indx,female)
xtabs(~educ_indx + female)
prop.table(table(educ_indx,female))
mean(educ_nohs[(AGE >= 25)&(AGE <= 55)])
mean(educ_hs[(AGE >= 25)&(AGE <= 55)])
mean(educ_somecoll[(AGE >= 25)&(AGE <= 55)])
mean(educ_college[(AGE >= 25)&(AGE <= 55)])
mean(educ_advdeg[(AGE >= 25)&(AGE <= 55)])
# alternatively
restrict1 <- as.logical((AGE >= 25)&(AGE <= 55))
dat_age_primeage <- subset(acs2017_ny, restrict1)
detach()
attach(dat_age_primeage)
mean(educ_nohs)
mean(educ_hs)
mean(educ_somecoll)
mean(educ_college)
mean(educ_advdeg)
detach()
detach()
detach()
detach()
detach()
load("acs2017_ny_data.RData")
attach(acs2017_ny)
PUMA <- as.factor(PUMA)
levels_n <- read.csv("PUMA_levels.csv")
levels_orig <- levels(PUMA)
levels_new <- join(data.frame(levels_orig),data.frame(levels_n))
library(tidyverse)
library(plyr)
levels_new <- join(data.frame(levels_orig),data.frame(levels_n))
levels(PUMA) <- levels_new$New_Level
summary(PUMA)
summary(levels_n)
summary(levels_new)
summary(levels_n)
summary(levels_orig)
levels_orig
load("acs2017_ny_data.RData")
attach(acs2017_ny)
PUMA <- as.factor(PUMA)
library(tidyverse)
library(tidyverse)
library(plyr)
levels_n <- read.csv("PUMA_levels.csv")
levels_orig <- levels(PUMA)
levels_new <- join(data.frame(levels_orig),data.frame(levels_n))
levels(PUMA) <- levels_new$New_Level
ddply(acs2017_ny, .(PUMA), summarize, mean = round(mean(AGE), 2), sd = round(sd(AGE), 2))
ddply(acs2017_ny, ~PUMA, summarize, mean = round(mean(AGE), 2), sd = round(sd(AGE), 2))
summary(PUMA)
ddply(acs2017_ny, .(PUMA), summarize, mean = round(mean(AGE), 2), sd = round(sd(AGE), 2))
ddply(acs2017_ny, PUMA, summarize, mean = round(mean(AGE), 2), sd = round(sd(AGE), 2))
ddply(acs2017_ny, ~ PUMA, summarize, mean = round(mean(AGE), 2), sd = round(sd(AGE), 2))
ddply(acs2017_ny, .(PUMA), summarize, mean = round(mean(AGE), 2), sd = round(sd(AGE), 2), nrow)
load("acs2017_ny_data.RData")
attach(acs2017_ny)
PUMA <- as.factor(PUMA)
library(tidyverse)
library(tidyverse)
library(plyr)
levels_n <- read.csv("PUMA_levels.csv")
levels_orig <- levels(PUMA)
levels_new <- join(data.frame(levels_orig),data.frame(levels_n))
levels(PUMA) <- levels_new$New_Level
ddply(acs2017_ny, .(PUMA), summarize, mean = round(mean(AGE), 2), sd = round(sd(AGE), 2), nrow)
ddply(acs2017_ny, .(PUMA), summarize, mean = round(mean(AGE), 2), sd = round(sd(AGE), 2), n_grp = nrow)
ddply(acs2017_ny, .(PUMA), nrow, summarize, mean = round(mean(AGE), 2), sd = round(sd(AGE), 2))
ddply(acs2017_ny, .(PUMA), summarize, mean = round(mean(AGE), 2), sd = round(sd(AGE), 2), n_obsv = length(PUMA))
